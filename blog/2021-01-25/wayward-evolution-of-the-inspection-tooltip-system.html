<!DOCTYPE html><html lang="en"><head><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="shortcut icon" href="/static/image/logo.png"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Wayward: Evolution of the inspection/tooltip system &nbsp;| &nbsp;Chiri's Blog</title><meta name="description" content="Wayward&#39;s UI has evolved a lot over the years, and in recent years most of those changes have been me redoing things. Recently — over the past two versions — I&#39;ve been doing a lot of work on the inspection system, trying to make it more powerful..."/><meta property="og:type" content="website"/><meta property="og:title" content="Wayward: Evolution of the inspection/tooltip system &nbsp;| &nbsp;Chiri's Blog"/><meta property="og:description" content="Wayward&#39;s UI has evolved a lot over the years, and in recent years most of those changes have been me redoing things. Recently — over the past two versions — I&#39;ve been doing a lot of work on the inspection system, trying to make it more powerful..."/><meta property="og:url" content="https://chiri.works/blog/2021-01-25/wayward-evolution-of-the-inspection-tooltip-system"/><meta property="og:image" content="https://chiri.works/static/image/logo.png"/><style>/* style/index.scss */:root{color-scheme:dark;--background-drawer:#1b1b27;--background-code:var(--background-drawer);--background:#223;--background-2:#272c45;--background-3:#2c3250;--background-4:#333b5f;--background-5:#3d4774;--background-6:#424e81;--color:#cdf;--color-2:#8d9cbe;--color-3:#46587c;--color-active:#fff;--color-price:#44b235;--color-length:#af87f8;--color-date:#bda51e;--color-tag:#cb66b6;--color-tag-active:#f58ee0;--link:#3196ff;--link-active:#5db4ff;--image-border:var(--background)}@media(prefers-color-scheme: light){:root{color-scheme:light;--background-drawer: var(--background-2);--background: #fff;--background-2: #f3f7ff;--background-3: #e1ebff;--background-4: #d4e1fb;--background-5: #cdf;--background-6: #c3d6fc;--color: #223;--color-2: #676783;--color-3: #a3a3dd;--color-date: #9f5800;--color-active: #000;--link: #1465fd;--link-active: #69a9fd;--color-length: #7f3ef0;--color-price: #0f7b00;--color-tag: #be47a5}}@font-face{font-family:"Poiret One";font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poiretone/v9/UqyVK80NJXN4zfRgbdfbo55cVw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Raleway";font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v18/1Ptug8zYS_SKggPNyC0ITw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Raleway";font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v18/1Ptug8zYS_SKggPNyC0ITw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Raleway";font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v18/1Ptsg8zYS_SKggPNyCg4TYFq.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Raleway";font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/raleway/v18/1Ptsg8zYS_SKggPNyCg4TYFq.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:"Spectral";font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/spectral/v6/rnCs-xNNww_2s0amA9uSsG3BafY.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body{background:#223;background:var(--background,#223);color:#cdf;color:var(--color,#cdf);font-family:"Raleway",sans-serif;margin:0;--padding-x: 4em;--padding-b: 2em;padding:0 var(--padding-x) var(--padding-b);transition:all .3s ease-out;transition-property:padding;position:relative;display:flex;flex-direction:column;min-height:100vh;box-sizing:border-box}@media(max-width: 1300px){body{--padding-x: 2em}}@media(max-width: 700px){body{--padding-x: 0em}}body>header p{margin-bottom:1em;padding-left:1em}body>header .tagline{font-style:italic;color:#8d9cbe;color:var(--color-2,#8d9cbe)}@media(max-width: 700px){body>header{padding-left:.5em;box-sizing:border-box}}main{flex-grow:1}main.basic{padding:2em}main>header{max-width:700px;margin:2em;padding-bottom:1em;border-bottom:2px solid #2c3250;border-bottom:2px solid var(--background-3,#2c3250);display:grid;grid-template-columns:1fr auto}main>header>nav{margin:auto}@media(max-width: 600px){main>header{margin-left:0;padding-left:1em;grid-template-columns:initial;grid-template-rows:auto auto}main>header>nav{padding-top:1em;width:100%}}main>header .card{grid-column:1/3;margin-left:1em !important}main>footer{margin-left:calc(200px + 4em);max-width:700px;margin-top:2em;padding-top:1em;border-top:2px solid #2c3250;border-top:2px solid var(--background-3,#2c3250);text-align:right}@media(max-width: 900px){main>footer{margin-left:100px;padding-right:1em}}.eoc{text-align:center}.eoc>img{max-height:3em;filter:grayscale(0.2);opacity:.2}p,li,summary{letter-spacing:.01em;line-height:1.5em;margin:.4em 0;text-align:justify}.paragraph-line-height{line-height:1.5em}a{font-weight:bold;color:#3196ff;color:var(--link,#3196ff);text-decoration:none;user-select:none;position:relative;margin:0 .2em;display:inline-block;padding:.1em .4em;z-index:1}a:not([class]){color:#3196ff;color:var(--link,#3196ff);display:inline-block;padding:0.1em 0.4em;background:none;transition:color .25s ease-out}a:not([class])::after{content:"";display:block;position:absolute;top:0;left:0;background:#3196ff;background:var(--link,#3196ff);transition:all .25s ease-out;transition-property:width,height;z-index:-1;height:100%;width:0%}a:not([class]):hover,a:not([class]):focus{transition-duration:.05s;color:#5db4ff;color:var(--link-active,#5db4ff)}a:not([class]):hover::after,a:not([class]):focus::after{transition-duration:.05s;width:100%}a:not([class])::after{opacity:.2}p a{border:none !important;padding:0 !important;margin:0 !important}article{width:calc(100% - 4em);max-width:900px;margin:2em 2em;background:#272c45;background:var(--background-2,#272c45);padding:1em;display:inline-block;box-sizing:border-box;position:relative;transition:all .5s ease-out;transition-property:margin,width;transition-timing-function:ease-out}@media(max-width: 700px){article{margin:2em 0;width:100%}}article>footer{display:grid;grid-template-columns:1fr auto;column-gap:1em;margin-bottom:-0.7em;position:relative;z-index:1}article>footer .local-link{margin-top:auto;margin-bottom:auto}:not(.paginated-list)>article:first-of-type:last-of-type{background:none}:not(.paginated-list)>article:first-of-type:last-of-type>footer,:not(.paginated-list)>article:first-of-type:last-of-type>footer p{text-align:justify}@media(min-width: 701px){article:nth-child(2n){margin-left:4em}}body>footer{margin:3em calc(var(--padding-x) * -1) calc(var(--padding-b) * -1);padding:3em calc(var(--padding-x) + 2em) var(--padding-b);text-align:right;background:#1b1b27;background:var(--background-drawer,#1b1b27);transition:all .3s ease-out;transition-property:margin,padding}body>footer p{text-align:right}body>footer nav{margin-top:1em;border-right:2px solid #333b5f;border-right:2px solid var(--background-4,#333b5f)}body>footer a{margin-bottom:.2em}*:not(picture)>img:not(.borderless),picture:not(.borderless)>img{border:2px solid var(--background);border:2px solid var(--image-border,var(--background));box-sizing:border-box}p img{max-width:100%}picture{display:contents}iframe{border:none;width:100%}.heading1,.heading2,.heading3,.heading4{font-family:"Poiret One",sans-serif}.heading1 a,.heading2 a,.heading3 a,.heading4 a{margin:0}.heading1,.heading1 a,.heading2,.heading2 a,.heading3,.heading3 a,.heading4,.heading4 a{font-weight:normal}.heading1{font-size:3em;margin-block-start:.67em;margin-block-end:.67em}.heading2{font-size:2.2em}@media(max-width: 700px){.heading2{margin:0}}.heading5{font-size:1em}.heading3{margin:0;display:grid;grid-template-columns:auto 1fr}article>.heading3{margin:-0.5em;position:sticky;top:-1px;z-index:3}.heading3,article>.heading3{font-size:2em;margin-bottom:.25em}.heading3 a{grid-column:1/3;text-decoration:none;font-weight:normal;border:none;border-radius:0;z-index:0;color:inherit;display:block;padding:0.1em 0.3em 0.2em;background:#2c3250;background:var(--background-3,#2c3250);transition:color .5s ease-out}.heading3 a::before{content:"";display:block;position:absolute;top:0;left:0;background:#333b5f;background:var(--background-4,#333b5f);transition:all .5s ease-out;transition-property:width,height;z-index:-1;height:100%;width:0%}.heading3 a:hover,.heading3 a:focus{transition-duration:.1s;color:#fff;color:var(--color-active,#fff)}.heading3 a:hover::before,.heading3 a:focus::before{transition-duration:.1s;width:100%}.heading4{font-size:1.5em}.inactive::before{content:"";display:block;position:absolute;top:0;right:0;background:#223;background:var(--background,#223);opacity:.7;width:100%;height:100%;transition:width .5s ease-out;z-index:100;pointer-events:none}.inactive:hover::before,.inactive:focus-within::before{width:0%;transition-duration:.1s}.card{background:#2c3250;background:var(--background-3,#2c3250);padding:1em;margin:1em;font-weight:normal;color:inherit;border:none;position:relative;z-index:1;transition:color .5s ease-out;box-sizing:border-box;width:calc(100% - 2em);border-radius:0}.card::before{content:"";display:block;position:absolute;top:0;left:0;width:0%;height:100%;background:#333b5f;background:var(--background-4,#333b5f);z-index:-1;transition:width .5s ease-out}.card:hover,.card:focus{color:#fff;color:var(--color-active,#fff);transition-duration:.1s}.card:hover::before,.card:focus::before{width:100%;transition-duration:.1s}@media(min-width: 700px){.card:nth-child(2n+1){margin-left:3em;width:calc(100% - 4em)}.card:nth-child(2n){margin-right:3em;width:calc(100% - 4em)}}.card:nth-child(2n+1)::before{left:auto;right:0}.card>img,.card>picture>img{min-width:0;max-width:100%}.card .heading4{font-size:2em;margin:0;margin-bottom:.5em;transition:font-size .5s ease-out;font-weight:normal;background:none;position:relative;top:auto;font-family:"Raleway",sans-serif;padding:0}.card .heading4::after{content:none}@media(max-width: 1000px){.card .heading4{font-size:1.6em}}.details,summary{color:#8d9cbe;color:var(--color-2,#8d9cbe);font-size:.9em;margin-bottom:.5em}.details span,summary span{font-weight:bold}summary{cursor:pointer}.price{color:#44b235;color:var(--color-price,#44b235)}.length{color:#af87f8;color:var(--color-length,#af87f8)}.date{color:#bda51e;color:var(--color-date,#bda51e)}.tag{color:#cb66b6;color:var(--color-tag,#cb66b6)}a.tag{padding-right:.5em !important;color:#cb66b6;color:var(--color-tag,#cb66b6);display:inline-block;padding:0.1em 0.3em 0.2em;background:none;transition:color .25s ease-out}a.tag::after{content:"";display:block;position:absolute;top:0;left:0;background:#cb66b6;background:var(--color-tag,#cb66b6);transition:all .25s ease-out;transition-property:width,height;z-index:-1;height:100%;width:0%}a.tag:hover,a.tag:focus{transition-duration:.05s;color:#f58ee0;color:var(--color-tag-active,#f58ee0)}a.tag:hover::after,a.tag:focus::after{transition-duration:.05s;width:100%}a.tag::after{opacity:.2}.tag+a.tag::before{position:absolute;content:",";pointer-events:none;color:#46587c;color:var(--color-3,#46587c);left:-0.5em;top:-0.05em}section:first-of-type{margin-top:1em}.heading4{position:sticky;top:1.9em;z-index:2;padding:.5em 0;margin:0;user-select:none;background:#272c45;background:var(--background-2,#272c45);display:grid;grid-template-columns:auto 1fr}.card .heading4{display:block}.heading4::after{content:"";height:1px;background:#3d4774;background:var(--background-5,#3d4774);position:relative;top:50%;margin-left:1em}:not(.paginated-list)>article:first-of-type:last-of-type .heading4{background:#223;background:var(--background,#223)}.local-link,.hash-link{vertical-align:middle;border-radius:0;border:none;font-weight:normal;z-index:0;color:inherit;display:inline-block;padding:0.5em 1.5em 0.6em 0.6em;background:#2c3250;background:var(--background-3,#2c3250);transition:color .5s ease-out}.local-link::before,.hash-link::before{content:"";display:block;position:absolute;top:0;left:0;background:#333b5f;background:var(--background-4,#333b5f);transition:all .5s ease-out;transition-property:width,height;z-index:-1;height:100%;width:0%}.local-link:hover,.local-link:focus,.hash-link:hover,.hash-link:focus{transition-duration:.1s;color:#fff;color:var(--color-active,#fff)}.local-link:hover::before,.local-link:focus::before,.hash-link:hover::before,.hash-link:focus::before{transition-duration:.1s;width:100%}@media(max-width: 700px){.local-link,.hash-link{overflow:hidden}}.local-link::after{content:"";display:block;position:absolute;top:50%;right:0;left:auto;transform:translateY(-50%);border:.5em solid transparent;border-left-color:#3d4774;border-left-color:var(--background-5,#3d4774);transition:all .5s ease-out;transition-property:right,border-left-color}.local-link:hover::after,.local-link:focus::after{transition-duration:.1s;border-left-color:#424e81;border-left-color:var(--background-6,#424e81);right:-0.25em}nav{line-height:1.2em;transition:all .3s ease-out;transition-property:line-height}nav a+a:not(.local-link){margin-left:.45em}nav a:not(.local-link)+a:not(.local-link)::before{position:absolute;content:"∙";pointer-events:none;color:#46587c;color:var(--color-3,#46587c);left:-0.5em;top:-0.05em}@media(max-width: 700px){nav{line-height:2em}}header nav .details{font-size:1em;padding:.5em;vertical-align:middle}.hash-link::after{content:"#";display:block;position:absolute;font-weight:bold;top:50%;right:.5em;transform:translateY(-50%);color:#3d4774;color:var(--background-5,#3d4774);transition:all .5s ease-out;transition-property:right,color}.hash-link:hover::after,.hash-link:focus::after{transition-duration:.1s;color:#424e81;color:var(--background-6,#424e81);right:.25em}.paginator{margin:2em;display:grid;grid-template-columns:2fr 1fr 2fr;max-width:900px}.paginator a{border-radius:0;border:none;font-weight:normal;z-index:0;display:grid !important;align-content:center}.paginator .paginator-prev{color:inherit;display:block;padding:0.5em 1.5em 0.6em 0.6em;background:#2c3250;background:var(--background-3,#2c3250);transition:color .5s ease-out;padding-left:1.5em}.paginator .paginator-prev::before{content:"";display:block;position:absolute;top:0;left:0;background:#333b5f;background:var(--background-4,#333b5f);transition:all .5s ease-out;transition-property:width,height;z-index:-1;left:auto;right:0;height:100%;width:0%}.paginator .paginator-prev:hover,.paginator .paginator-prev:focus{transition-duration:.1s;color:#fff;color:var(--color-active,#fff)}.paginator .paginator-prev:hover::before,.paginator .paginator-prev:focus::before{transition-duration:.1s;width:100%}.paginator .paginator-prev::after{content:"";display:block;position:absolute;top:50%;left:0;right:auto;transform:translateY(-50%);border:.5em solid transparent;border-right-color:#3d4774;border-right-color:var(--background-5,#3d4774);transition:all .5s ease-out;transition-property:left,border-right-color}.paginator .paginator-prev:hover::after,.paginator .paginator-prev:focus::after{transition-duration:.1s;border-right-color:#424e81;border-right-color:var(--background-6,#424e81);left:-0.25em}.paginator .paginator-next{text-align:right;grid-column:3;color:inherit;display:block;padding:0.5em 1.5em 0.6em 0.6em;background:#2c3250;background:var(--background-3,#2c3250);transition:color .5s ease-out}.paginator .paginator-next::before{content:"";display:block;position:absolute;top:0;left:0;background:#333b5f;background:var(--background-4,#333b5f);transition:all .5s ease-out;transition-property:width,height;z-index:-1;height:100%;width:0%}.paginator .paginator-next:hover,.paginator .paginator-next:focus{transition-duration:.1s;color:#fff;color:var(--color-active,#fff)}.paginator .paginator-next:hover::before,.paginator .paginator-next:focus::before{transition-duration:.1s;width:100%}.paginator .paginator-next::after{content:"";display:block;position:absolute;top:50%;right:0;left:auto;transform:translateY(-50%);border:.5em solid transparent;border-left-color:#3d4774;border-left-color:var(--background-5,#3d4774);transition:all .5s ease-out;transition-property:right,border-left-color}.paginator .paginator-next:hover::after,.paginator .paginator-next:focus::after{transition-duration:.1s;border-left-color:#424e81;border-left-color:var(--background-6,#424e81);right:-0.25em}.paginator .paginator-index{grid-column:2;text-align:center;color:inherit;display:block;padding:0.5em 1.5em 0.6em 0.6em;background:#2c3250;background:var(--background-3,#2c3250);transition:color .5s ease-out}.paginator .paginator-index::before{content:"";display:block;position:absolute;top:0;left:0;background:#333b5f;background:var(--background-4,#333b5f);transition:all .5s ease-out;transition-property:width,height;z-index:-1;height:0%;width:100%}.paginator .paginator-index:hover,.paginator .paginator-index:focus{transition-duration:.1s;color:#fff;color:var(--color-active,#fff)}.paginator .paginator-index:hover::before,.paginator .paginator-index:focus::before{transition-duration:.1s;height:100%}.paginator .paginator-index::after{content:none}.rss-link{padding:0;vertical-align:initial;top:4px}.rss-link,.heading1 .rss-link,.heading2 .rss-link,.heading3 .rss-link,.heading4 .rss-link{grid-column:2;background:none;display:inline-block;width:1em;height:1em;box-sizing:border-box;position:relative;margin-left:.25em}.rss-link>svg{position:absolute;top:50%;left:50%;width:calc(100% - 8px);height:calc(100% - 8px);transform:translate(-50%, -50%)}.rss-link::after{content:none}.blog-smol{box-sizing:border-box;position:relative;padding:1em;margin-top:1em;padding-right:2em}.blog-smol+.blog-smol{margin-top:.5em}.blog-smol .date{padding-right:.5em;margin-right:.5em;border-right:1px solid #46587c;border-right:1px solid var(--color-3,#46587c)}#home{margin-bottom:.3em}#home a{overflow:initial;vertical-align:initial;color:inherit;padding:0;border:none;position:relative;width:100%;max-width:10em;transition:color .5s ease-out;background:none}#home a::before{content:"";display:block;position:absolute;width:0em;height:1.5em;top:-0.15em;left:-0.5em;transition:width .5s ease-out;background:var(--background-3);z-index:-1}#home a:hover,#home a:focus{color:var(--color-active);transition-duration:.1s}#home a:hover::before,#home a:focus::before{width:10.5em;transition-duration:.1s}#home a::after{content:none}/* style/page/blog.scss */#home{position:relative}#home>div,#home>span{position:absolute;top:0;display:grid;grid-template-columns:auto 1fr;pointer-events:none}#home>div>span{opacity:0;user-select:none}#home .rss-link{width:1em;height:1em;pointer-events:all}#home .rss-link::before{top:0;left:0;height:100%}#home .rss-link:hover::before,#home .rss-link:focus::before{width:100%}.blogpost p:not(.details),.blogpost li{margin:1em 0;line-height:1.6em;font-size:1.1em}.blogpost.preview::after{content:"";position:absolute;left:0;bottom:4em;width:100%;height:calc(100% - 4em);background:linear-gradient(to top, #272c45, transparent 100px);background:linear-gradient(to top, var(--background-2,#272c45), transparent 100px);pointer-events:none}.readmore>span{pointer-events:none;user-select:none;position:absolute;left:-999999999px}pre,code{background:var(--background-code);font-size:1.1em;line-height:1.4em}code{padding:.1em .2em .2em;vertical-align:text-bottom}pre{padding:1em 1.5em;overflow-x:auto;color:#659fbf}.keyword{color:#309eb3}.constant,.builtin,.boolean{color:#0086ff}.attr,.property,.params{color:#657dbf}.class{color:#5eb593}.function,.decorator{color:#207698}.string,.regex{color:#0fb1fc}.number{color:#75c8b1}.operator{color:var(--color-3)}.punctuation{color:var(--color-3)}.comment{color:#47556e}.doctag{color:#1a72bd}@media(prefers-color-scheme: light){.keyword{color:inherit}.constant,.builtin,.boolean{color:inherit}.attr,.property,.params{color:inherit}.class{color:inherit}.function,.decorator{color:inherit}.string,.regex{color:inherit}.number{color:inherit}.operator{color:var(--color-3)}.punctuation{color:var(--color-3)}.comment{color:inherit}.doctag{color:inherit}}</style></head><body><header><div class="heading heading1" id="home"><a class="local-link" href="/blog"><span>Chiri's Blog</span></a><div><span aria-hidden="true">Chiri's Blog</span><a class="local-link rss-link" href="/blog/rss.xml" aria-label="RSS Feed"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 24.332 24.332" style="enable-background:new 0 0 24.332 24.332;fill:currentColor" xml:space="preserve">
	<g>
		<path d="M3.607,17.11C1.618,17.11,0,18.726,0,20.717c0,1.984,1.618,3.604,3.607,3.604s3.607-1.619,3.607-3.604
			C7.214,18.726,5.596,17.11,3.607,17.11z"/>
		<path d="M0.375,7.951C0.169,7.951,0,8.12,0,8.328v4.578c0,0.206,0.169,0.374,0.375,0.374c5.879,0,10.665,4.784,10.665,10.665
			c0,0.205,0.166,0.375,0.375,0.375h4.581h0.016c0.209,0,0.377-0.17,0.377-0.375l-0.018-0.117
			C16.305,15.064,9.152,7.951,0.375,7.951z"/>
		<path d="M24.311,23.828C24.246,10.681,13.531,0.01,0.375,0.01C0.169,0.01,0,0.179,0,0.387v4.711c0,0.207,0.169,0.375,0.375,0.375
			c10.186,0,18.472,8.287,18.472,18.473c0,0.205,0.168,0.375,0.373,0.375h4.713h0.02c0.205,0,0.379-0.17,0.379-0.375L24.311,23.828z
			"/>
	</g>
</svg>
</a></div></div><p class="tagline">Where a fox goes to ramble!</p><nav><a class="local-link" href="/">Portfolio</a><a href="https://github.com/ChiriVulpes">GitHub</a><a href="https://twitter.com/ChiriVulpes">Twitter</a><a href="https://www.patreon.com/chirivulpes">Patreon (Writing)</a><a href="https://discord.gg/XPPvW9F">Discord</a></nav></header><main><article class="blogpost"><h1 class="heading heading3" id="wayward-evolution-of-the-inspection-tooltip-system"><a class="hash-link" href="#wayward-evolution-of-the-inspection-tooltip-system">Wayward: Evolution of the inspection/tooltip system</a></h1><p>Wayward&#39;s UI has evolved a lot over the years, and in recent years most of those changes have been me redoing things. Recently — over the past two versions — I&#39;ve been doing a lot of work on the inspection system, trying to make it more powerful for all the cases we need it. But I figured that there might be people interested in seeing the whole evolution of it!</p>
<p>Also, if you stick around to the end, some fun new features will be shown off. Get excited!</p>
<section><h2 class="heading heading4" id="the-inception-of-world-tooltips">The inception of &quot;world tooltips&quot;</h2>
<p>World tooltips were first introduced in Wayward Beta 2.1 &quot;Appearance&quot;, allowing you to hover over doodads, creatures, corpses, and more. Here&#39;s a couple examples of tooltips from back then:</p>
<p><picture alt="Wayward Beta 2.1 &quot;Appearance&quot; Berry Bush tooltip"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.1-doodad-inspection.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.1-doodad-inspection.png" loading="lazy" alt="Wayward Beta 2.1 &quot;Appearance&quot; Berry Bush tooltip"/></picture>
<picture alt="Wayward Beta 2.1 &quot;Appearance&quot; Rabbit and An Animal Skull tooltip"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.1-creature-inspection.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.1-creature-inspection.png" loading="lazy" alt="Wayward Beta 2.1 &quot;Appearance&quot; Rabbit and An Animal Skull tooltip"/></picture></p>
<p>The way tooltips were implemented back then was basically hardcoded text interpolated with specific values where necessary. Think like <code class="string">"You dropped the {0}."</code> being interpolated with <code class="string">"branch"</code> to form <code class="string">"You dropped the branch."</code></p>
<p>Some text in the tooltips used a translateable &quot;dictionary&quot; which was shared with messages, and other text was just hardcoded — no way for translators to change it in other languages. The way it was generated also meant it was impossible for the tooltip to have granular updates — the system just didn&#39;t allow for that kind of thing. No, if a part of a tooltip needed to be refreshed, the <em>entire</em> thing had to be.</p>
<p>There wasn&#39;t anything super inherently bad or wrong about this — it was just the initial implementation. Like all aspects of Wayward, they&#39;re improved and reworked and polished version-to-version. There definitely were places that could use big improvements, but, well, that could come with time. And it did!</p>
</section><section><h2 class="heading heading4" id="the-new-ui-new-translation-system-and-new-event-system">The New UI, new Translation system, and new event system</h2>
<p>Now I&#39;m going to get a bit sidetracked, and take you on an adventure through some of my other big projects in Wayward&#39;s history. These ones I&#39;m bringing up are important, though, because without them the new inspection system couldn&#39;t function!</p>
<section><h2 class="heading heading5" id="new-ui">New UI</h2>
<p>I joined the Wayward team right near the beginning of development on Wayward Beta 2.3 &quot;Expression&quot;, and I helped ship the UI of the character creator. After getting my bearings for a couple updates, in Wayward Beta 2.5 &quot;Kinship&quot; I redesigned every one of the game&#39;s menus. This meant the title screen, the options menus, little interrupts that confirm if you want to do something, you name it. These changes were the introduction of the &quot;New UI&quot;, a rewriting project which has been ongoing ever since.</p>
</section><section><h2 class="heading heading5" id="new-translation-system">New Translation system</h2>
<p>I made another change in Wayward Beta 2.6 &quot;Mercantile&quot; which greatly impacted the game — a new system to manage the massive amount of language there was. Originally the game had a lot of translations using multiple systems — for example, there were four ways just to <em>get</em> translations (these are all a bit technical):</p>
<ul>
<li>Combining a <code class="property">prefix</code>, <code class="property">name</code>, and <code class="property">suffix</code> stored by the language system in the definition of a creature/item/doodad.</li>
<li>There was a helper to return a translation when given its dictionary and entry and &quot;translation type&quot; (which could be <code class="property">prefix</code>, <code class="property">name</code>, <code class="property">suffix</code>, or <code class="property">description</code> I believe.) If none were given, all translation types would be returned.</li>
<li>There was a helper to get a combined translation (<code class="property">prefix</code> + <code class="property">name</code> + <code class="property">suffix</code>) of a translation.</li>
<li>There was a newer replacement <code class="class">Translation</code> class whose instances targeted a single translation and could accept arguments to interpolate into the translation.</li>
</ul>
<p>And none of that even gets into the fact that for all the remaining old UI, the translations were applied into the elements by selectors and directly replacing their text — that was one of the language system&#39;s responsibilities rather than the UI!</p>
<p>Anyway, yeah, in 2.6 the entirety of that system was rewritten, resulting in all translations using the same <code class="class">Translation</code> class that could automatically handle adding new dictionaries, could interpolate all kinds of arguments into translations, and even supported additional different &quot;kinds&quot; of interpolations — fun aspects of this will pop up later in this article.</p>
<p>One impact that this system had on the existing tooltips is that a lot of them were now creating a lot of <code class="class">Translation</code>  instances at a pretty fast rate, and a lot of the time that was unnecessary. But it wasn&#39;t enough to impact the performance to a worrying degree — there <em>were</em> optimisations in place and such — but more improvements would come as the game evolved.</p>
</section><section><h2 class="heading heading5" id="new-event-system">New Event system</h2>
<p>Wayward&#39;s event systems have gone through a few iterations:</p>
<ol>
<li>Hooks<ul>
<li>2.0-2.5 — A hook system where mod classes contain hardcoded hook names that can be overridden, and any place where the hooks are called needs to reference the mod system. Mods need to opt into which hooks they&#39;re using by listing them in their <code>mod.json</code> file.</li>
<li>2.6 — A new hook system that centralises hook definitions and supports more kinds of hooks. (More than just calling them and getting an array of results.) Mods no longer have the hook names baked into themselves, instead they&#39;re baked into an <code class="class">IHookHost</code> which any class can hook into.</li>
</ul>
</li>
<li>Other internal event emitters<ul>
<li>2.5-2.7 — A simplistic emitter system for emitting and subscribing to events. This wasn&#39;t used in too many places, but enough that it was an important part of the game&#39;s backend.</li>
</ul>
</li>
</ol>
<p>In Wayward Beta 2.8 &quot;Odds &amp; Ends&quot;, the newer hook system and the event emitter system were combined into the new event system. Initially it was very experimental, I had no idea if what I was doing would actually be possible. Basically what I wanted (and succeeded in doing) was (again, a bit technical):</p>
<ul>
<li>Any object can have an event emitter in itself which can emit strongly-typed events.</li>
<li>Any subscriber can subscribe to an event whenever it&#39;s emitted by any instance of a class.</li>
<li>Some classes are registered as &quot;event buses&quot;, and a subscriber can choose to subscribe to events from these rather than specific classes. This is mostly set up to help modders find useful events.</li>
<li>All event subscription is strongly-typed, whether via an <code class="function">@EventHandler</code> decorator, a <code class="function">subscribe()</code> function call, etc.</li>
<li>Plus any other improvements to different &quot;kinds of hooks&quot; that I mentioned above.</li>
</ul>
</section></section><section><h2 class="heading heading4" id="new-ui-inspections-take-1">New UI inspections: Take 1</h2>
<p>In Wayward 2.7 &quot;Deserted Trials&quot; I tackled an &quot;inspections&quot; system for the first time. I believe the initial problem which got me to work on the system was related to bugs found for the old world tooltips, potentially this bug: <a href="https://trello.com/c/Y5sPmot1/6387-fixed-world-tooltips-from-rapidly-flashing-on-off-if-hovering-over-an-object-while-using-an-item-performing-actions-thanks-monke">Fixed world tooltips from rapidly flashing on/off if hovering over an object while using an item/performing actions.</a></p>
<p>The way I implemented the system was vague in that it supported any number of &quot;inspection&quot; types on any given tile, and it would show them all separately in the tooltip.</p>
<p><picture alt="Wayward Beta 2.7 &quot;Deserted Trials&quot; Rabbit and An Animal Skull tooltip"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.7-creature-inspection.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.7-creature-inspection.png" loading="lazy" alt="Wayward Beta 2.7 &quot;Deserted Trials&quot; Rabbit and An Animal Skull tooltip"/></picture></p>
<p>It also was written in a way which supported modders creating their own inspection types, which was something I thought would be helpful for more technical mods. Back then the example I gave was to imagine a &quot;heat&quot; mod which added heat to every tile, and they could register an inspection type which showed the heat of each tile.</p>
<p>Unfortunately, the system was still fundamentally flawed — although it was definitely more powerful, and better for modders, it wasn&#39;t great at updating itself. The way the tooltip was generated was basically a really big chain of data processing that built a tooltip out of the inspection types. </p>
<details>
<summary>Here is that awful mess in all its glory.</summary>

<pre><code class="language-ts"><span class="keyword"><span class="token keyword">public</span></span> <span class="keyword"><span class="token keyword">static</span></span> <span class="title function">inspect</span><span class="token punctuation">(</span><span class="attr">inspector</span><span class="token operator">:</span> <span class="title class">Human</span><span class="token punctuation">,</span> <span class="attr">tilePosition</span><span class="token operator">:</span> <span class="title class">Vector</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="attr">context</span><span class="token operator">:</span> <span class="title class">InspectionContext</span> <span class="token operator">|</span> <span class="built_in"><span class="token builtin">string</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="title class">IterableIterator</span><span class="token operator">&lt;</span>IInspectionSectionSimple<span class="token operator">></span> <span class="token punctuation">{</span>
	<span class="keyword"><span class="token keyword">const</span></span> tile <span class="token operator">=</span> game<span class="token punctuation">.</span><span class="title function">getTile</span><span class="token punctuation">(</span><span class="token operator">...</span>tilePosition<span class="token punctuation">.</span><span class="property">xyz</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="keyword"><span class="token keyword">const</span></span> inspection <span class="token operator">=</span> <span class="keyword"><span class="token keyword">new</span></span> <span class="title class">Inspection</span><span class="token punctuation">(</span>inspector<span class="token punctuation">,</span> context<span class="token punctuation">,</span> tile<span class="token punctuation">,</span> tilePosition<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="keyword"><span class="token keyword">return</span></span> <span class="title class">Enums</span><span class="token punctuation">.</span><span class="title function">entries</span><span class="token punctuation">(</span><span class="title class">InspectType</span><span class="token punctuation">)</span>
		<span class="token comment">// if this is inspection is for a tooltip, we filter by the types of inspections the player has chosen to include there </span>
		<span class="token punctuation">.</span><span class="title function">filter</span><span class="token punctuation">(</span><span class="function"><span class="token punctuation">(</span><span class="params"><span class="token punctuation">[</span><span class="token punctuation">,</span> inspectType<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span> context <span class="token operator">!==</span> <span class="title class">InspectionContext</span><span class="token punctuation">.</span><span class="property">Tooltip</span> <span class="token operator">||</span> saveDataGlobal<span class="token punctuation">.</span><span class="property">options</span><span class="token punctuation">.</span><span class="property">tooltips</span><span class="token punctuation">[</span>inspectType<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="literal"><span class="token boolean">false</span></span><span class="token punctuation">)</span>
		<span class="token comment">// get the inspection handlers from the inspect types that should be shown </span>
		<span class="token punctuation">.</span><span class="title function">map</span><span class="token punctuation">(</span><span class="function"><span class="token punctuation">(</span><span class="params"><span class="token punctuation">[</span>name<span class="token punctuation">,</span> inspectType<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span> <span class="title function">tuple</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> inspections<span class="token punctuation">[</span>inspectType<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="property">filter2</span><span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="built_in"><span class="token builtin">string</span></span><span class="token punctuation">,</span> IInspectionHandler <span class="token operator">|</span> IInspectionHandler<span class="token punctuation">[</span><span class="string"><span class="token string">"handle"</span></span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="function"><span class="token punctuation">(</span><span class="params"><span class="token punctuation">[</span>name<span class="token punctuation">,</span> handler<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span> handler<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="property">map</span><span class="token operator">&lt;</span>IInspectionHandler<span class="token operator">></span><span class="token punctuation">(</span><span class="function"><span class="token punctuation">(</span><span class="params"><span class="token punctuation">[</span>name<span class="token punctuation">,</span> handler<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="attr">priority</span><span class="token operator">:</span> <span class="title class">BasicInspectionPriority</span><span class="token punctuation">[</span>name <span class="keyword"><span class="token keyword">as</span></span> <span class="token keyword">keyof</span> <span class="keyword"><span class="token keyword">typeof</span></span> <span class="title class">BasicInspectionPriority</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="number"><span class="token number">0</span></span><span class="token punctuation">,</span>
			<span class="token operator">...</span> <span class="keyword"><span class="token keyword">typeof</span></span> handler <span class="token operator">===</span> <span class="string"><span class="token string">"object"</span></span> <span class="token operator">?</span> handler <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="attr">handle</span><span class="token operator">:</span> handler <span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token comment">// sort the inspections by their priority </span>
		<span class="token punctuation">.</span><span class="title function">collect</span><span class="token punctuation">(</span><span class="title class">Collectors</span><span class="token punctuation">.</span><span class="property">toArray</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="title function">sort</span><span class="token punctuation">(</span><span class="function"><span class="token punctuation">(</span><span class="params">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span></span> a<span class="token punctuation">.</span><span class="property">priority</span><span class="token operator">!</span> <span class="token operator">-</span> b<span class="token punctuation">.</span><span class="property">priority</span><span class="token operator">!</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="title function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token comment">// use those inspection handlers to get the final list of all inspections, separated by "section", eg a doodad or a player  </span>
		<span class="token punctuation">.</span><span class="title function">map</span><span class="token punctuation">(</span><span class="function"><span class="params">handler</span> <span class="token operator">=></span></span> <span class="token punctuation">(</span>handler<span class="token punctuation">.</span><span class="title function">handle</span><span class="token punctuation">(</span>inspection<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="title function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="title function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="property">filter</span><span class="token operator">&lt;</span><span class="literal"><span class="token keyword">undefined</span></span><span class="token operator">></span><span class="token punctuation">(</span><span class="function"><span class="params">inspectionSection</span> <span class="token operator">=></span></span> inspectionSection<span class="token punctuation">)</span>
		<span class="token comment">// we could have an IInspectionSection object or the content of one, but we need to always return an IInspectionSection </span>
		<span class="token punctuation">.</span><span class="title function">map</span><span class="token punctuation">(</span><span class="function"><span class="params">section</span> <span class="token operator">=></span></span> <span class="token punctuation">{</span>
			<span class="keyword"><span class="token keyword">const</span></span> content <span class="token operator">=</span> <span class="title function">isIterable</span><span class="token punctuation">(</span>section<span class="token punctuation">)</span> <span class="token operator">?</span> section <span class="token operator">:</span> section<span class="token punctuation">.</span><span class="property">content</span><span class="token punctuation">;</span>
			section <span class="token operator">=</span> <span class="title function">isIterable</span><span class="token punctuation">(</span>section<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">{</span> content <span class="token punctuation">}</span> <span class="token operator">:</span> section<span class="token punctuation">;</span>
			section<span class="token punctuation">.</span><span class="property">content</span> <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="title function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="title function">map</span><span class="token punctuation">(</span><span class="function"><span class="params">inspectionText</span> <span class="token operator">=></span></span> inspectionText <span class="keyword"><span class="token keyword">instanceof</span></span> <span class="title class">Translation</span> <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="attr">text</span><span class="token operator">:</span> inspectionText <span class="token punctuation">}</span> <span class="token operator">:</span> inspectionText<span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="property">filter</span><span class="token operator">&lt;</span><span class="literal"><span class="token keyword">undefined</span></span><span class="token operator">></span><span class="token punctuation">(</span><span class="function"><span class="params">inspectionText</span> <span class="token operator">=></span></span> inspectionText<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="keyword"><span class="token keyword">return</span></span> section <span class="keyword"><span class="token keyword">as</span></span> IInspectionSectionSimple<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token comment">// filter out inspection sections with no content </span>
		<span class="token punctuation">.</span><span class="title function">filter</span><span class="token punctuation">(</span><span class="function"><span class="params">inspectionSection</span> <span class="token operator">=></span></span> <span class="token punctuation">{</span>
			<span class="keyword"><span class="token keyword">const</span></span> <span class="token punctuation">[</span>hasAny<span class="token punctuation">,</span> content<span class="token punctuation">]</span> <span class="token operator">=</span> inspectionSection<span class="token punctuation">.</span><span class="property">content</span><span class="token punctuation">.</span><span class="title function">collect</span><span class="token punctuation">(</span><span class="title class">Collectors</span><span class="token punctuation">.</span><span class="property">hasAny</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			inspectionSection<span class="token punctuation">.</span><span class="property">content</span> <span class="token operator">=</span> content<span class="token punctuation">;</span>
			<span class="keyword"><span class="token keyword">return</span></span> hasAny<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</details>

<p>If you couldn&#39;t tell, that was completely unmaintainable and it also had issues: namely, when a bit of it had to update, the entire thing had to. Wait... isn&#39;t that the exact same issue that the old stuff had? Yep!</p>
</section><section><h2 class="heading heading4" id="new-ui-inspections-take-2">New UI inspections: Take 2</h2>
<p>The new inspection system was created in Wayward Beta 2.9 &quot;Seafarer&quot;, and since then it&#39;s served us rather nicely. The core idea of the system is very similar to the old one, but with a key difference: every single portion of the tooltip, rather than just being an object defining the translation to use and how to display it, is instead an instance of an <code class="class">InfoProvider</code> class. This class is responsible for initialising its own UI component, and updating its text when necessary.</p>
<p>All three of the technologies I listed above are necessary in making this system work:</p>
<ul>
<li>The New UI stuff is rather obvious, I couldn&#39;t make the UI components anywhere near as easily if not for that system and the work that&#39;s been put into it.</li>
<li>The translation system also plays a huge role — being able to save objects that store lots of information about a translation and how to render it is incredibly important.</li>
<li>But <em>by far</em>, the <em>most important</em> technology is the event system. The event system allows the <code class="class">InfoProvider</code> to watch for events on its UI components, it allows it to emit events to its parent <code class="class">InfoProvider</code>s, it allows it to subscribe to its child ones, and most importantly, it allows it to subscribe to all manner of miscellaneous game events related to the object it&#39;s referencing in the first place.</li>
</ul>
<p>What this means is that I can incredibly easily just throw together an <code class="class">InfoProvider</code> that can watch some aspect of an object and refresh the translation whenever necessary. And all of it is because of all the other technologies made over the years.</p>
<p>Oh, and the appearance of tooltips was also improved in 2.9 — but that&#39;s less related to the tech.</p>
<p><picture alt="Wayward Beta 2.9 &quot;Seafarer&quot; Rabbit and An Animal Skull tooltip"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.9-creature-inspection.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.9-creature-inspection.png" loading="lazy" alt="Wayward Beta 2.9 &quot;Seafarer&quot; Rabbit and An Animal Skull tooltip"/></picture></p>
<section><h2 class="heading heading5" id="inspect-dialog">Inspect Dialog</h2>
<p>2.9 also saw the introduction of the &quot;Inspect&quot; dialog. This dialog allows inspecting a tile to see the details as you move the mouse to other places. It&#39;s useful for keeping track of the status of doodads, for example. The dialog actually uses the same system as the tooltip, internally.</p>
<p><picture alt="Wayward Beta 2.9 &quot;Seafarer&quot; Rabbit and An Animal Skull in inspect dialog"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.9-creature-inspection-dialog.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.9-creature-inspection-dialog.png" loading="lazy" alt="Wayward Beta 2.9 &quot;Seafarer&quot; Rabbit and An Animal Skull in inspect dialog"/></picture></p>
</section></section><section><h2 class="heading heading4" id="new-ui-inspection-210-updates">New UI inspection 2.10 updates</h2>
<p>In Wayward Beta 2.10 &quot;Seafarer+&quot;, the inspection system of Wayward has gotten a lot of additional work put into it. Again, this was one of those things that took the culmination of a few technologies:</p>
<section><h2 class="heading heading5" id="the-reference-system">The &quot;reference&quot; system</h2>
<p>Until now, the game has had no way to store permanent references to specific objects. For example, even though an item has an ID, when the item is removed or you go to a different island, the same ID can be used to reference a completely different item. The same was true for all kinds of objects, from creatures to doodads to even NPCs.</p>
<p>However, I had a use case for a system that allowed keeping track of all objects, so I designed a system that could keep track of everything in this way. The way the reference system works is pretty simple:</p>
<ul>
<li>All save games contain a single &quot;reference manager&quot; which has an integer that gets incremented whenever a new reference ID is required.</li>
<li>Whenever a new object is created, they&#39;re assigned a reference ID. In old games, with objects that don&#39;t have reference IDs, they&#39;re assigned them as part of save upgrading.</li>
<li>When something needs to get the object referenced by a specific ID, they say, &quot;hey, game, gimme the item by reference ID 12!&quot; and the game loops through all the items looking for one with ID 12.<ul>
<li>Note: Yes, this is not very performant, but the system is not meant to be performant. There are very, very few cases where reference IDs should be useful.</li>
</ul>
</li>
<li>The system also supports getting any object referenced by an ID, since no ID is shared even between objects of different kinds. For example, &quot;hey, game, gimme the thingymajig by reference ID 12!&quot; and the game loops through all things that have reference IDs and finds the one with that ID. And then the consumer of that thing would be like &quot;ohhh, okay, so it was an item&quot; or whatever.</li>
</ul>
</section><section><h2 class="heading heading5" id="reference-tooltips">Reference tooltips</h2>
<p>So the purpose of the reference system was something called &quot;reference tooltips&quot;. Remember how earlier I mentioned that the translation system supports special kinds of interpolations? Well, the purpose was this. At this point, all translations can reference specific game objects, which means...</p>
<p><picture alt="Wayward Beta 2.10 &quot;Seafarer+&quot; Giant Rat reference tooltip"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.10-creature-inspection-reference.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.10-creature-inspection-reference.png" loading="lazy" alt="Wayward Beta 2.10 &quot;Seafarer+&quot; Giant Rat reference tooltip"/></picture>
<picture alt="Wayward Beta 2.10 &quot;Seafarer+&quot; Swimming reference tooltip"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.10-skill-inspection-reference.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.10-skill-inspection-reference.png" loading="lazy" alt="Wayward Beta 2.10 &quot;Seafarer+&quot; Swimming reference tooltip"/></picture></p>
<p>Support has been added to hover over tons of different things in messages to get more information about them! This includes items, creatures, doodads, players, NPCs, and even skills! More will be added in the future, too.</p>
<p>And do you see the other new thing in that image?</p>
</section><section><h2 class="heading heading5" id="inspect-dialog-updates">Inspect dialog updates</h2>
<p>Any reference tooltip can now be inspected in the inspect dialog, which means you can see additional information in them, and even hover over things in them to see even more information. And any of those tooltips which they themselves are reference tooltips can also be inspected. It&#39;s basically like a wiki system that just happens naturally in the game&#39;s text!</p>
<p>And this is paired with another work-in-progress improvement that&#39;s happening to the inspect dialog...</p>
<p><picture alt="Wayward Beta 2.10 &quot;Seafarer+&quot; Item Stack inspect dialog"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.10-item-stack-inspection-dialog.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.10-item-stack-inspection-dialog.png" loading="lazy" alt="Wayward Beta 2.10 &quot;Seafarer+&quot; Item Stack inspect dialog"/></picture></p>
<p>When standing next to a stack of items, you can now inspect the tile with the stack to get details on all of the items!</p>
<p>Note that this is a work-in-progress feature — these item inspections are not 1:1 with the old item tooltips because they&#39;re a complete reimplementation of the old ones, this time in the inspect system. If the reimplementation is finished by 2.10&#39;s release, I may try to get item reference tooltips to show when you&#39;re hovering over items in the old UI. (It&#39;s pretty hard and annoying for the systems to mix, so I try not to add new places too often. Generally it&#39;s best just to reimplement things in the new systems, but in order to show item tooltips that way I&#39;d have to reimplement <em>all</em> of the old item UI, and that&#39;s just a huge project. One step at a time, you know?)</p>
<p>Anyway, since the new item tooltips are inspections they can take advantage of tooltip support, so tons of stuff in here will have tooltips. Here&#39;s an example:</p>
<p><picture alt="Wayward Beta 2.10 &quot;Seafarer+&quot; Item Stack inspect dialog with tooltip over usage"><source srcset="/static/image/thumb/article/2021-01-26/wayward-2.10-item-stack-inspection-dialog-2.webp" type="image/webp"/><img srcset="/static/image/thumb/article/2021-01-26/wayward-2.10-item-stack-inspection-dialog-2.png" loading="lazy" alt="Wayward Beta 2.10 &quot;Seafarer+&quot; Item Stack inspect dialog with tooltip over usage"/></picture></p>
<p>And I guess that&#39;s about all I have to share! Sorry this post has been so wordy... I had a lot more to talk about than I realised I did. For anyone who managed to stick through this whole thing, thank you! I&#39;ll see if I can make another post soon talking about some more Wayward things.</p></section></section><footer><p class="details">Posted <span class="date"><span data-date="2021-01-25T14:11:09.277Z" data-format="{&quot;year&quot;:&quot;numeric&quot;,&quot;month&quot;:&quot;long&quot;,&quot;day&quot;:&quot;numeric&quot;,&quot;hour&quot;:&quot;numeric&quot;,&quot;minute&quot;:&quot;numeric&quot;,&quot;timeZoneName&quot;:&quot;short&quot;}" title="January 25, 2021 at 2:11 PM UTC" aria-label="January 25, 2021 at 2:11 PM UTC">2 years ago</span></span><br/>Tagged as <a class="tag" href="/blog/tag/wayward">wayward</a><a class="tag" href="/blog/tag/programming">programming</a></p></footer></article><nav class="paginator"><a class="local-link paginator-prev" href="/blog/2021-01-24/i-has-website-now-"><span>I has website now! &nbsp;<span class="details">Previous</span></span></a><a class="local-link paginator-index" href="/blog">All</a><a class="local-link paginator-next" href="/blog/2021-09-28/destiny-2-no-shattered-realm-is-not-good-actually"><span><span class="details">Next</span>&nbsp; Destiny 2: No, Shattered Realm is Not Good, Actually</span></a></nav></main><footer><nav><a href="https://github.com/ChiriVulpes">GitHub</a><a href="https://twitter.com/ChiriVulpes">Twitter</a><a href="https://discord.gg/XPPvW9F">Discord</a><br/><a href="https://www.scribblehub.com/profile/12063/chirivulpes/?sp=1">Scribble Hub</a><a href="https://chirivulpes.itch.io/">itch.io</a><a href="https://www.patreon.com/chirivulpes">Patreon</a><br/><a href="https://www.youtube.com/channel/UCePEUnShLHdvPfsjkEH5dDA">YouTube</a><a href="https://www.twitch.tv/chirivulpes">Twitch</a><a href="https://soundcloud.com/chirivulpes">SoundCloud</a><a href="https://chirivulpes.bandcamp.com/">Bandcamp</a></nav></footer><script>/* client/article.ts */"use strict"; document.querySelectorAll("article") .forEach(articleElement => articleElement .addEventListener("click", event => { var _a, _b; return !((_a = event.target) === null || _a === void 0 ? void 0 : _a.closest("a, iframe")) && ((_b = articleElement.querySelector(".heading a")) === null || _b === void 0 ? void 0 : _b.focus()); })); /* client/date.ts */"use strict"; const RelativeTime = Intl && Intl.RelativeTimeFormat && new Intl.RelativeTimeFormat("en"); function refreshDates() { var _a; for (const element of document.querySelectorAll("[data-date]")) { const date = new Date((_a = element.dataset.date) !== null && _a !== void 0 ? _a : 0); const isToday = date.toDateString() === new Date().toDateString(); const tooltip = date.toLocaleString(undefined, isToday ? { hour: "numeric", minute: "numeric" } : JSON.parse(element.dataset.format)); element.textContent = ago(date); element.setAttribute("aria-label", element.title = tooltip); } } refreshDates(); function ago(date) { const seconds = Math.floor((Date.now() - date.getTime()) / 1000); const timescales = [ ["year", 31536000], ["month", 2592000], ["week", 604800], ["day", 86400], ["hour", 3600], ["minute", 60], ]; for (const [name, timescale] of timescales) { const interval = Math[seconds < 0 ? "ceil" : "floor"](seconds / timescale); if (interval) return RelativeTime ? RelativeTime.format(-interval, name) : interval < 0 ? `in ${-interval} ${name}${interval === 1 ? "" : "s"}` : `${interval} ${name}${interval === 1 ? "" : "s"} ago`; } return "now"; } </script></body></html>